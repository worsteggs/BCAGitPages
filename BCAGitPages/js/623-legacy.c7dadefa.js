"use strict";(self["webpackChunkbrain_web"]=self["webpackChunkbrain_web"]||[]).push([[623],{95623:function(e,t,l){l.r(t),l.d(t,{default:function(){return d}});var r=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"filter-cell"},[l("div",{staticStyle:{flex:"1",display:"flex"}},[l("el-checkbox",{staticClass:"filter-check-txt",model:{value:e.params.notFlag,callback:function(t){e.$set(e.params,"notFlag",t)},expression:"params.notFlag"}},[e._v("Exclude")]),l("span",{staticClass:"filter-cell-label"},[e._v("Cell Type")]),l("div",{staticStyle:{display:"inline-block","vertical-align":"text-top",width:"187px",flex:"1"}},[l("el-dropdown",{attrs:{trigger:e.disabled?"disabled":"click",placement:"bottom-start"}},[l("el-input",{class:{"el-input_border":e.iptBlueBorder()},staticStyle:{width:"187px"},attrs:{id:"cellTypeTreeSearch",placeholder:"Filter by name",disabled:e.disabled,clearable:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),l("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[l("div",{staticClass:"dropdownTreeWapper"},[l("div",{attrs:{align:"right"}},[l("el-checkbox",{on:{change:e.subtypesCheckbox},model:{value:e.cellCheck,callback:function(t){e.cellCheck=t},expression:"cellCheck"}},[e._v(" include subtypes ")])],1),l("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{"default-expanded-keys":["Cell"],"default-checked-keys":e.params.cellType,"node-key":"label",data:e.zNodes,"show-checkbox":"","filter-node-method":e.filterNode,"check-strictly":e.cellStrictly},on:{"check-change":e.checkChange}})],1)])],1),l("el-tag",{staticStyle:{width:"187px","margin-left":"10px"}},[e._v("   "+e._s(e.params.cellType?e.params.cellType.length:0)+" cell types selected  ")]),l("div",[e.params.cellType&&e.params.cellType.length?l("div",{staticClass:"cellType-item"},e._l(e.params.cellType,(function(t,r){return l("el-tag",{key:r},[e._v(" "+e._s(t)+" ")])})),1):e._e()])],1)],1),l("filterIcon",{attrs:{questionTip:"Select cells annotated as one or several cell types"},on:{close:function(t){return e.$emit("close")}}})],1)},n=[],a=l(48534),c=(l(36133),l(41539),l(78783),l(33948),l(57327),l(54747),l(91038),l(70189),l(21249),{props:{params:{type:Object,default:function(){return{cellType:[]}}},disabled:{type:Boolean,default:!1}},components:{filterIcon:function(){return l.e(73).then(l.bind(l,53073))}},data:function(){return{filterText:"",zNodes:[],cellCheck:!0,cellStrictly:!1,nodes:{}}},watch:{filterText:function(e){e&&this.$refs.tree.filter(e)}},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.celltypeChange();case 2:l=t.sent,e.zNodes=l,e.setCellDisabled(e.zNodes[0]);case 5:case"end":return t.stop()}}),t)})))()},methods:{celltypeChange:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("cellCollection/fetchCelltree");case 2:return l=t.sent,t.abrupt("return",l);case 4:case"end":return t.stop()}}),t)})))()},iptBlueBorder:function(){return!!(this.params.cellType&&this.params.cellType.length>0)},subtypesCheckbox:function(e){this.cellStrictly=!e},setCellDisabled:function(e){var t=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0===e.type&&"Cell"!==e.label){var r=l?l.children:[];l.children=r.filter((function(t){return t.id!==e.id}))}e.children&&e.children.forEach((function(l){t.setCellDisabled(l,e)}))},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},checkChange:function(){var e=this.$refs.tree.getCheckedNodes();this.params.cellType=Array.from(new Set(e.map((function(e){return e.label})))),this.$forceUpdate()}}}),i=c,s=l(43736),o=(0,s.Z)(i,r,n,!1,null,"3015c4ca",null),d=o.exports}}]);