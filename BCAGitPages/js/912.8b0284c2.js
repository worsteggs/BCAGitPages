"use strict";(self["webpackChunkbrain_web"]=self["webpackChunkbrain_web"]||[]).push([[912],{1912:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var l=function(){var e=this,t=e._self._c;return t("div",[e.showMarker?t("div",[t("b-pane",{attrs:{label:"VOLCANO PLOT"}},[t("div",{staticClass:"search-by"},[t("span",{staticClass:"t"},[e._v("Search by ")]),t("ul",[t("li",[t("span",[e._v("Region : ")]),t("el-tag",[e._v(e._s(e.params.region))])],1),t("li",[t("span",[e._v("Cell type : ")]),t("el-tag",[e._v(e._s(e.params.cellType))])],1)])]),t("div",{staticClass:"mt10",attrs:{align:"center"}},[t("el-image",{staticStyle:{width:"58%"},attrs:{src:`${e.NODE_ENV}/data/volcano/VolcanoBy${e.atlasMarkerBtn}/${e.params.atlas}_${e.params.region}_${e.params.cellType}.png`,alt:""},scopedSlots:e._u([{key:"error",fn:function(){return[t("div",{staticClass:"image-slot"},[t("el-empty",{attrs:{description:"Not available in current version of Brain Cell Atals"}})],1)]},proxy:!0}])})],1)]),t("b-pane",{attrs:{label:"MARKERS"}},[t("div",{staticClass:"search-by"},[t("span",{staticClass:"t"},[e._v("Search by ")]),t("ul",[t("li",[t("span",[e._v("Region : ")]),t("el-tag",[e._v(e._s(e.params.region))])],1),t("li",[t("span",[e._v("Cell type : ")]),t("el-tag",[e._v(e._s(e.params.cellType))])],1)])]),t("div",{staticClass:"download-show"},[t("div",{staticClass:"mt10"},[e._v(" Download : "),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.downloadFile("csv")}}},[e._v("csv")]),t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.downloadFile("pdf")}}},[e._v("pdf")])],1),t("div",[e._v(" Show : "),t("el-button",[e._v("P-Value")]),t("span",[e._v(" Top "),e._l(e.pageSizes,(function(a){return t("a",{key:a,staticClass:"page-size",class:{line:a==e.pageSize},attrs:{href:"javascript:void();"},on:{click:function(t){return e.choosePagesize(a)}}},[e._v(" "+e._s(a)+" ")])}))],2)],1)]),e.tableData.length<1?t("el-table",{attrs:{data:[],height:"500"}},e._l(e.columnList,(function(a){return t("el-table-column",{key:a,attrs:{prop:a,label:a,sortable:"Link"!==a}},["Link"!==a?t("el-table-column",{attrs:{prop:a},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-select",{attrs:{placeholder:"filter",clearable:""},on:{change:t=>e.headerChange(t,"Species")},model:{value:e.columnSelect["Species"],callback:function(t){e.$set(e.columnSelect,"Species",t)},expression:"columnSelect['Species']"}},[t("el-option",{attrs:{value:""}},[e._v("All ")])],1)]},proxy:!0}],null,!0)}):e._e()],1)})),1):t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mt10",attrs:{data:e.tableData,"empty-text":"Not available in current version of Brain Cell Atals",height:"600px","header-row-class-name":"headerRowClass"}},[t("el-table-column",{attrs:{prop:"C0",label:"genes",sortable:""}},[t("el-table-column",{attrs:{prop:"C0"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-select",{attrs:{placeholder:"filter"},on:{change:t=>e.headerChange(t,"C0")},model:{value:e.columnSelect["C0"],callback:function(t){e.$set(e.columnSelect,"C0",t)},expression:"columnSelect['C0']"}},[t("el-option",{attrs:{value:""}},[e._v("All ")]),e._l(e.selectKeyArray["C0"],(function(a,l){return t("el-option",{key:`C0${a}${l}`,attrs:{value:a}},[e._v(e._s(a))])}))],2)]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["C0"]||"-")+" ")]}}])})],1),t("el-table-column",{attrs:{prop:"avg_log2FC",label:"avg_log2FC",sortable:""}},[t("el-table-column",{attrs:{prop:"avg_log2FC"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-select",{attrs:{placeholder:"filter"},on:{change:t=>e.headerChange(t,"avg_log2FC")},model:{value:e.columnSelect["avg_log2FC"],callback:function(t){e.$set(e.columnSelect,"avg_log2FC",t)},expression:"columnSelect['avg_log2FC']"}},[t("el-option",{attrs:{value:""}},[e._v("All ")]),e._l(e.selectKeyArray["avg_log2FC"],(function(a,l){return t("el-option",{key:`avg_log2FC${a}${l}`,attrs:{value:a}},[e._v(e._s(a))])}))],2)]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["avg_log2FC"]||"-")+" ")]}}])})],1),t("el-table-column",{attrs:{prop:"p_val",label:"p_val",sortable:""}},[t("el-table-column",{attrs:{prop:"p_val"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-select",{attrs:{placeholder:"filter"},on:{change:t=>e.headerChange(t,"p_val")},model:{value:e.columnSelect["p_val"],callback:function(t){e.$set(e.columnSelect,"p_val",t)},expression:"columnSelect['p_val']"}},[t("el-option",{attrs:{value:""}},[e._v("All ")]),e._l(e.selectKeyArray["p_val"],(function(a,l){return t("el-option",{key:`p_val${a}${l}`,attrs:{value:a}},[e._v(e._s(a))])}))],2)]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["p_val"])+" ")]}}])})],1),t("el-table-column",{attrs:{prop:"p_val_adj",label:"p_val_adj",sortable:""}},[t("el-table-column",{attrs:{prop:"p_val_adj"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-select",{attrs:{placeholder:"filter"},on:{change:t=>e.headerChange(t,"p_val_adj")},model:{value:e.columnSelect["p_val_adj"],callback:function(t){e.$set(e.columnSelect,"p_val_adj",t)},expression:"columnSelect['p_val_adj']"}},[t("el-option",{attrs:{value:""}},[e._v("All ")]),e._l(e.selectKeyArray["p_val_adj"],(function(a,l){return t("el-option",{key:`p_val_adj${a}${l}`,attrs:{value:a}},[e._v(e._s(a))])}))],2)]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["p_val_adj"])+" ")]}}])})],1),t("el-table-column",{attrs:{prop:"pct.1",label:"pct.1",sortable:""}},[t("el-table-column",{attrs:{prop:"pct.1"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-select",{attrs:{placeholder:"filter"},on:{change:t=>e.headerChange(t,"pct.1")},model:{value:e.columnSelect["pct.1"],callback:function(t){e.$set(e.columnSelect,"pct.1",t)},expression:"columnSelect['pct.1']"}},[t("el-option",{attrs:{value:""}},[e._v("All ")]),e._l(e.selectKeyArray["pct.1"],(function(a,l){return t("el-option",{key:`pct1${a}${l}`,attrs:{value:a}},[e._v(e._s(a))])}))],2)]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["pct.1"]||"-")+" ")]}}])})],1),t("el-table-column",{attrs:{prop:"pct.2",label:"pct.2",sortable:""}},[t("el-table-column",{attrs:{prop:"pct.2"},scopedSlots:e._u([{key:"header",fn:function(){return[t("el-select",{attrs:{placeholder:"filter"},on:{change:t=>e.headerChange(t,"pct.2")},model:{value:e.columnSelect["pct.2"],callback:function(t){e.$set(e.columnSelect,"pct.2",t)},expression:"columnSelect['pct.2']"}},[t("el-option",{attrs:{value:""}},[e._v("All ")]),e._l(e.selectKeyArray["pct.2"],(function(a,l){return t("el-option",{key:`pct2${a}${l}`,attrs:{value:a}},[e._v(e._s(a))])}))],2)]},proxy:!0},{key:"default",fn:function(t){return[e._v(" "+e._s(t.row["pct.2"]||"-")+" ")]}}])})],1)],1)],1)],1):t("el-empty",{attrs:{description:"Click the Markers button to show"}})],1)},r=[],s=(a(326),a(8905),a(6263),a(4045),a(2968)),n={name:"Markers",props:{params:{type:Object,default:()=>({})},atlasMarkerBtn:{type:String,default:"Region"}},data(){return{showMarker:!1,frozenData:[],tableData:[],tabelKeys:[],pageSize:9999,pageSizes:[50,100],loading:!0,VolcanoMarkerBy:"VolcanoByRegion",NODE_ENV:"",columnSelect:{C0:"",avg_log2FC:"",p_val:"",p_val_adj:"","pct.1":"","pct.2":""},selectKeyArray:{},columnList:["C0","avg_log2FC","p_val","p_val_adj","pct.1","pct.2"]}},watch:{params:{handler(e){this.showMarker=!1,this.tableData=[]},deep:!0},atlasMarkerBtn:{handler(e){this.VolcanoMarkerBy="VolcanoBy"+e},immediate:!0}},methods:{downloadFile(e){if(this.tableData.length<1)return;const t=`${this.NODE_ENV}/data/csv/markersBy${this.atlasMarkerBtn}/${this.params.atlas}_${this.params.region}_${this.params.cellType}_cell_type.${e}`;"pdf"===e?fetch(t).then((t=>{t.blob().then((t=>{const a=document.createElement("a"),l=window.URL.createObjectURL(t),r=`${this.params.atlas}_${this.params.region}_${this.params.cellType}_cell_type.${e}`;a.href=l,a.download=r,a.click(),window.URL.revokeObjectURL(l)}))})):window.open(t)},choosePagesize(e){this.pageSize=e,this.fetchMarkers(this.params)},async fetchMarkers(e){if("Mouse"===e.atlas)return void(this.tableData=[]);const t=Object.values(this.params);if(t.includes(""))this.$message.error("Please select all options");else{this.showMarker=!0,this.loading=!0;try{const t=await(0,s.zp)({fileName:`csv/markersBy${this.atlasMarkerBtn}/${e.atlas}_${e.region}_${e.cellType}_cell_type.csv`,maxLength:this.pageSize}),a=Object.keys(t);let l=[];t.C0.forEach(((e,r)=>{l.push(a.reduce(((e,a)=>(e[a]=t[a][r],e)),{}))})),this.tableData=l,this.frozenData=[...l],this.tabelKeys=a,a.forEach((e=>{this.selectKeyArray[e]=[...new Set(t[e])]})),this.loading=!1}catch(a){this.tableData=[],this.loading=!1}}},headerChange(e,t){const a=Object.keys(this.columnSelect).filter((e=>""!=this.columnSelect[e]));let l=[];a.forEach((e=>{l=this.frozenData.filter((t=>t[e]===this.columnSelect[e]))})),this.tableData=a.length<1?this.frozenData:l,this.$nextTick((()=>{this.$set(this.columnSelect,t,e),this.$forceUpdate()}))}}},o=n,c=a(4249),i=(0,c.Z)(o,l,r,!1,null,"4eead57a",null),p=i.exports}}]);